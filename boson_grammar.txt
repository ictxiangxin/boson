start : grammar
      ;

grammar: command_block reduction_block
       | reduction_block
       ;

command_block : command_block command_line
              | command_line
              ;

command_line : command name_list end
             ;

reduction_block : reduction_block reduction
                | reduction
                ;

reduction : name reduce derivation_list end
        ;

derivation_list : derivation_list or derivation
                | derivation
                ;

derivation : name_list code
           | name_list
           ;

name_list : name_list name
          | name
          ;